"""AIè‡ªå‹•åˆ†é¡ç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ"""
from datetime import date


def generate_diary_classification_prompt(content: str, entry_date: date) -> str:
    """æ—¥è¨˜å†…å®¹ã‹ã‚‰æˆé•·æƒ…å ±ã‚’è‡ªå‹•åˆ†é¡ã™ã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ"""

    return f"""
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š æ—¥è¨˜ã®è‡ªå‹•åˆ†é¡ã‚’ãŠé¡˜ã„ã—ã¾ã™
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ä»¥ä¸‹ã®æ—¥è¨˜ã‹ã‚‰ã€æˆé•·ã«é–¢ã™ã‚‹æƒ…å ±ã‚’æŠ½å‡ºã—ã¦åˆ†é¡ã—ã¦ãã ã•ã„ã€‚

ã€æ—¥è¨˜å†…å®¹ã€‘
{content}

ã€åˆ†é¡é …ç›®ã¨ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã€‘

1ï¸âƒ£ learned_today (ä»Šæ—¥å­¦ã‚“ã ã“ã¨)
   æŠ½å‡ºå¯¾è±¡:
   - æŠ€è¡“ãƒ»ã‚¹ã‚­ãƒ«ãƒ»çŸ¥è­˜ã§æ–°ã—ãå­¦ã‚“ã ã“ã¨
   - ç†è§£ãŒæ·±ã¾ã£ãŸã“ã¨
   - ã‚„ã‚Šæ–¹ãƒ»æ–¹æ³•ãŒã‚ã‹ã£ãŸã“ã¨

   âœ… è‰¯ã„ä¾‹:
   - "SQLiteã®ä½¿ã„æ–¹"
   - "ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æ›¸ãæ–¹"
   - "ãƒ‡ãƒãƒƒã‚°ã®åŠ¹ç‡çš„ãªé€²ã‚æ–¹"

   âŒ æ‚ªã„ä¾‹:
   - "é ‘å¼µã£ãŸ" (å­¦ã³ã§ã¯ãªã„)
   - "ãƒã‚°ä¿®æ­£ã—ãŸ" (è¡Œå‹•ã§ã‚ã£ã¦å­¦ã³ã§ã¯ãªã„)

2ï¸âƒ£ compared_to_past (éå»ã®è‡ªåˆ†ã¨æ¯”ã¹ã¦ã§ããŸã“ã¨)
   æŠ½å‡ºå¯¾è±¡:
   - æ™‚é–“çŸ­ç¸®ã€åŠ¹ç‡åŒ–
   - ç†è§£åº¦ã®å‘ä¸Š
   - ã§ããªã‹ã£ãŸã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸ

   âœ… è‰¯ã„ä¾‹:
   - "å‰ã¯8æ™‚é–“ã‹ã‹ã£ãŸãŒä»Šæ—¥ã¯5æ™‚é–“ã§ã§ããŸ"
   - "å…ˆé€±ã¯ã‚ã‹ã‚‰ãªã‹ã£ãŸãŒä»Šæ—¥ã¯è‡ªåˆ†ã§è§£æ±ºã§ããŸ"
   - "ä»¥å‰ã¯å…ˆè¼©ã«èã„ã¦ã„ãŸãŒä»Šå›ã¯è‡ªåˆ†ã§èª¿ã¹ã¦ã§ããŸ"

   âŒ æ‚ªã„ä¾‹:
   - "æˆé•·ã—ãŸ" (å…·ä½“æ€§ãŒãªã„)
   - "å‰ã‚ˆã‚Šã§ããŸ" (æ¯”è¼ƒãŒæ›–æ˜§)

3ï¸âƒ£ invisible_growth (ä»–äººã¯æ°—ã¥ã‹ãªã„ãŒè‡ªåˆ†ã¯æˆé•·ã—ãŸã“ã¨)
   æŠ½å‡ºå¯¾è±¡:
   - æ€è€ƒãƒ‘ã‚¿ãƒ¼ãƒ³ã®å¤‰åŒ–
   - ç¿’æ…£ãƒ»å§¿å‹¢ã®å¤‰åŒ–
   - å†…é¢çš„ãªæˆé•·

   âœ… è‰¯ã„ä¾‹:
   - "ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãå‰ã«è¨­è¨ˆã‚’è€ƒãˆã‚‹ã‚ˆã†ã«ãªã£ãŸ"
   - "è³ªå•ã™ã‚‹å‰ã«è‡ªåˆ†ã§èª¿ã¹ã‚‹ç¿’æ…£ãŒã¤ã„ãŸ"
   - "ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã‚‚ç„¦ã‚‰ãªããªã£ãŸ"

4ï¸âƒ£ external_feedback (ä»–äººã‹ã‚‰ã®è©•ä¾¡ãƒ»æŒ‡æ‘˜)
   æŠ½å‡ºå¯¾è±¡:
   - å…ˆè¼©ã€ä¸Šå¸ã€ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼ã‹ã‚‰ã®è©•ä¾¡
   - æŒ‡æ‘˜ã•ã‚ŒãŸå†…å®¹
   - è¤’ã‚ã‚‰ã‚ŒãŸã“ã¨ãƒ»æ³¨æ„ã•ã‚ŒãŸã“ã¨

   âœ… è‰¯ã„ä¾‹:
   - "å…ˆè¼©ã‹ã‚‰ã€ã¾ã é…ã„ã€ã¨è¨€ã‚ã‚ŒãŸ"
   - "ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã€ãƒ­ã‚¸ãƒƒã‚¯ãŒè¤‡é›‘ã€ã¨æŒ‡æ‘˜ã•ã‚ŒãŸ"
   - "ã€å‰ã‚ˆã‚Šè‰¯ããªã£ãŸã€ã¨è©•ä¾¡ã•ã‚ŒãŸ"

ã€å‡ºåŠ›å½¢å¼ã€‘
ä»¥ä¸‹ã®å½¢å¼ã§å›ç­”ã—ã¦ãã ã•ã„ï¼ˆè©²å½“ãªã—ã®é …ç›®ã¯ "ãªã—" ã¨è¨˜è¼‰ï¼‰:

learned: "..."
compared: "..."
invisible: "..."
external: "..."

ã€é‡è¦ã€‘
- æ—¥è¨˜ã®å†…å®¹ã‚’è¦ç´„ã™ã‚‹ã®ã§ã¯ãªãã€è©²å½“ã™ã‚‹é …ç›®ã ã‘ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„
- è©²å½“ã™ã‚‹è¨˜è¿°ãŒãªã„é …ç›®ã¯ "ãªã—" ã¨ã—ã¦ãã ã•ã„
- ç°¡æ½”ã«ã€ã—ã‹ã—å…·ä½“çš„ã«æŠ½å‡ºã—ã¦ãã ã•ã„

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

åˆ†é¡ãŒå®Œäº†ã—ãŸã‚‰ã€ä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„:
- æŠ½å‡ºå†…å®¹ã¯æ—¥è¨˜ã®å†…å®¹ã¨åˆã£ã¦ã„ã¾ã™ã‹?
- å…·ä½“çš„ã§åˆ†ã‹ã‚Šã‚„ã™ã„ã§ã™ã‹?

ç¢ºèªå¾Œã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦åˆ†é¡çµæœã‚’ä¿å­˜ã—ã¦ãã ã•ã„:

```bash
clap diary update {entry_date} --learned "..." --compared "..." --invisible "..." --external "..."
```

(è©²å½“ãªã—ã®é …ç›®ã¯ã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰çœç•¥ã—ã¦OKã§ã™)
"""


def generate_task_learning_prompt(task_title: str, task_id: int) -> str:
    """ã‚¿ã‚¹ã‚¯å®Œäº†æ™‚ã®å­¦ã³æŠ½å‡ºãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ"""

    return f"""
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š ã‚¿ã‚¹ã‚¯å®Œäº†ã®å­¦ã³æŠ½å‡ºã‚’ãŠé¡˜ã„ã—ã¾ã™
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å®Œäº†ã—ãŸã‚¿ã‚¹ã‚¯: ã€Œ{task_title}ã€

ã€è³ªå•ã€‘
ã“ã®ã‚¿ã‚¹ã‚¯ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„:

1ï¸âƒ£ å­¦ã‚“ã ã“ã¨ (learning)
   - ã“ã®ã‚¿ã‚¹ã‚¯ã§æ–°ã—ãå­¦ã‚“ã æŠ€è¡“ãƒ»çŸ¥è­˜ãƒ»ã‚„ã‚Šæ–¹
   - ç†è§£ãŒæ·±ã¾ã£ãŸã“ã¨

   ä¾‹: "ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æ›¸ãæ–¹"
       "ãƒ†ã‚¹ãƒˆã®æ›¸ãæ–¹ã®åŸºæœ¬"

2ï¸âƒ£ é›£æ˜“åº¦ã®å¤‰åŒ– (difficulty)
   - é–‹å§‹æ™‚: ã“ã®ã‚¿ã‚¹ã‚¯ã€å§‹ã‚ã‚‹å‰ã¯ã©ã®ãã‚‰ã„é›£ã—ãã†ã§ã—ãŸã‹? (1-5)
     1=ç°¡å˜ãã†ã€3=æ™®é€šã€5=ã¨ã¦ã‚‚é›£ã—ãã†

   - å®Œäº†æ™‚: å®Ÿéš›ã‚„ã£ã¦ã¿ã¦ã©ã†ã§ã—ãŸã‹? (1-5)
     1=ç°¡å˜ã ã£ãŸã€3=æ™®é€šã€5=ã¨ã¦ã‚‚é›£ã—ã‹ã£ãŸ

   ã“ã®å·®ãŒã€Œç†è§£åº¦ã®å‘ä¸Šã€ã‚’ç¤ºã—ã¾ã™!

3ï¸âƒ£ éå»ã¨ã®æ¯”è¼ƒ (improvement_notes)
   - ä¼¼ãŸã‚¿ã‚¹ã‚¯ã‚’å‰ã«ã‚‚ã‚„ã£ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ã‹?
   - ãã®æ™‚ã¨æ¯”ã¹ã¦ä½•ã‹å¤‰ã‚ã‚Šã¾ã—ãŸã‹?

   ä¾‹: "å‰å›ã¯å…ˆè¼©ã«èã„ãŸãŒä»Šå›ã¯è‡ªåˆ†ã§èª¿ã¹ã¦è§£æ±ºã§ããŸ"

ã€å‡ºåŠ›å½¢å¼ã€‘

learning: "..."
difficulty_before: 4
difficulty_after: 2
improvement: "..."

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å›ç­”ãŒå¾—ã‚‰ã‚ŒãŸã‚‰ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ä¿å­˜ã—ã¦ãã ã•ã„:

```bash
clap task done {task_id} --learning "..." --difficulty-before 4 --difficulty-after 2
```

(improvement_notes ã¯ç¾åœ¨æœªå®Ÿè£…ã®ãŸã‚çœç•¥)
"""


def generate_confirmation_prompt(classification_result: dict) -> str:
    """åˆ†é¡çµæœã®ç¢ºèªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ"""

    return f"""
ã€åˆ†é¡çµæœã®ç¢ºèªã€‘

ä»¥ä¸‹ã®å†…å®¹ã§ä¿å­˜ã—ã¦ã‚ˆã‚ã—ã„ã§ã™ã‹?

learned_today: {classification_result.get('learned', 'ãªã—')}
compared_to_past: {classification_result.get('compared', 'ãªã—')}
invisible_growth: {classification_result.get('invisible', 'ãªã—')}
external_feedback: {classification_result.get('external', 'ãªã—')}

ç¢ºèªã§ããŸã‚‰ã€æç¤ºã•ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚
ä¿®æ­£ãŒå¿…è¦ãªå ´åˆã¯ã€ã‚³ãƒãƒ³ãƒ‰ã®å†…å®¹ã‚’å¤‰æ›´ã—ã¦å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚
"""
